apiVersion: argoproj.io/v1alpha1
kind: WorkflowTemplate
metadata:
  name: cypress
spec:
  arguments:
    parameters:
      - name: registry
        value: ghcr.io/devxp-tech
      - name: image
        value: backstage
      - name: version
        value: f8172400
      - name: command
        value: "npx cypress run"
  templates:
    - name: cypress-template
      inputs:
        parameters:
          - name: registry
          - name: image
          - name: version
          - name: command
      container:
        image: "{{inputs.parameters.registry}}/{{inputs.parameters.image}}:{{inputs.parameters.version}}"
        command: ["{{inputs.parameters.command}}"]
        # args: ["{{inputs.parameters.image}}"]
