apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
namespace: tracing
helmCharts:
  - name: opentelemetry-collector
    includeCRDs: true
    releaseName: open-telemetry
    version: 0.73.1
    repo: https://open-telemetry.github.io/opentelemetry-helm-charts
    valuesInline:
      mode: deployment
      fullnameOverride: opentelemetry-collector
      config:
        receivers:
          otlp:
            protocols:
              http:
                endpoint: 0.0.0.0:4319
              grpc:
                endpoint: 0.0.0.0:4320

        exporters:
          # prometheus:
          #   endpoint: "0.0.0.0:8889"
          jaeger:
            endpoint: "jaeger-collector.observability.svc:4318"

        connectors:
          spanmetrics:

        processors:
          batch:

        service:
          pipelines:
            traces:
              receivers: [otlp]
              processors: [batch]
              exporters: [jaeger]
            # metrics:
            #   receivers: [otlp]
            #   processors: [batch]
            #   exporters: [logging, prometheus]
