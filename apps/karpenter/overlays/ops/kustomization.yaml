apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
resources:
  - ../../base
  - provisioner.yaml
helmCharts:
  - name: karpenter
    releaseName: karpenter
    version: v0.23.0 #0.16.3
    repo: public.ecr.aws/karpenter #https://charts.karpenter.sh/
    includeCRDs: true
    valuesInline:
      nameOverride: karpenter
      clusterName: lgseksd1
      clusterEndpoint: https://8673475BD214DFD1169339A996680AE1.gr7.us-east-1.eks.amazonaws.com
      serviceAccount:
        annotations:
          eks.amazonaws.comrole-arn: "arn:aws:iam::239468932737:role/KarpenterControllerRole-lgseksd1"
      #   settings:
      #     aws:
      #       clusterName: ${CLUSTER_NAME}
      #       clusterEndpoint: ${CLUSTER_ENDPOINT}
      #       defaultInstanceProfile: KarpenterNodeInstanceProfile-${CLUSTER_NAME}
      #       interruptionQueueName: ${CLUSTER_NAME}
