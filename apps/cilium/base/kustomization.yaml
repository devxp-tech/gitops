apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
namespace: kube-system
helmCharts:
  - name: cilium
    releaseName: cilium
    version: 1.15.1
    repo: https://helm.cilium.io
    valuesInline:
      cni:
        chainingMode: aws-cni
        exclusive: false
      enableIPv4Masquerade: false
      routingMode: native
      endpointRoutes:
        enabled: true
      hubble:
        enabled: true
        metrics:
          enabled:
            - dns:query;ignoreAAAA
            - drop
            - tcp
            - flow
            - port-distribution
            - icmp
            - http
        peerService:
          clusterDomain: k8s.core.example.net
        relay:
          enabled: true
        ui:
          enabled: true
        tls:
          enabled: false
